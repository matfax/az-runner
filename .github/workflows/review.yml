name: pull request review
on: 
  - pull_request

permissions:
  contents: read
  pull-requests: write

jobs:
  dependency-review:
    runs-on: ubuntu-latest
    environment: tabnine
    steps:
      - name: checkout repository
        uses: actions/checkout@692973e3d937129bcbf40652eb9f2f61becf3332 # v4.1.7
        with:
            fetch-depth: 0
        
      - name: run review agent
        uses: codota/tabnine-pr-agent@v1
        with:
            PAT: ${{ secrets.TABNINE_PAT }}
            ref: origin/${{ github.head_ref }}
            base_ref: origin/${{ github.base_ref }}
            path_to_repo: ${{ github.workspace }}
            repository_owner: ${{ github.repository_owner }}
            repository_name: ${{ github.event.repository.name }}
            pull_request_id: ${{ github.event.pull_request.number }}
            github_token: ${{ github.token }}
